function addToDo(a,b){var c=$("<li>"+a.get("title")+"</li>");return $(".content ul").append("<hr>"),$(".content ul").append(c),$("li").length===b.length&&$(".content ul").append("<hr>"),c}function fetchCollection(a){a.fetch({success:function(a){displayCollection(a)},error:function(a,b){console.log(b.description)}})}function getQuery(a,b){var c=new Parse.Query(ToDoClass);c.get(a,{success:function(a){b.add(a),displayCollectionIf()},error:function(a,b){console.log(b.description)}})}function displayCollection(a){$(".content ul").html(""),a.each(function(b){makeIconsClickable(addIcons(addToDo(b,a),b,a),b,a)})}function addIcons(a,b,c){return $(a).hover(function(){var a='<a href="#" class="edit" "'+b.id+'">✎</a>',d='<a href="#" class="complete" "'+b.id+'">✓</a>',e='<a href="#" class="delete" "'+b.id+'">✕</a>';c===uncompletedToDos?$(this).append(a,d,e):$(this).append(e)},function(){$(this).html(""),$(this).text(b.get("title"))}),a}function makeIconsClickable(a,b,c){$(a).on("click",".edit",function(){toggleEditModal(),$(".new-to-do").hasClass("new-to-do-active")&&toggleDropDown(),$(".edit-input").val(b.get("title")),$(".edit-input").attr("id",b.id),$(".edit-input").focus()}),$(a).on("click",".complete",function(){saveCompletion(c,completedToDos,b.id)}),$(a).on("click",".delete",function(){saveDeletion(c,b.id)})}function toggleEditModal(){$(".modal-background").toggleClass("modal-background-active"),$(".modal-box").toggleClass("modal-box-active")}function toggleButtons(){$(".uncompleted").toggleClass("toggle-button-active"),$(".completed").toggleClass("toggle-button-active")}function toggleDropDown(){$(".new-to-do").toggleClass("new-to-do-active"),$(".thin-line").toggleClass("thin-line-active"),$(".container").toggleClass("container-active")}function validate(a){return""===$(a).val()?!1:($(a).val(""),!0)}function inputLetterLimit(a){if($("#input-pixel-length").text($(a).val()),$("#input-pixel-length").width()>225){var b=$(a).val().slice(0,-1);$(a).val(b)}}function saveAddition(a,b){var c=new ToDoClass;c.set("title",$(a).val()),c.set("completed",!1),hardSave(c,a,b)}function saveEdit(a,b){b.each(function(c){c.id===$(a).attr("id")&&(c.set("title",$(a).val()),hardSave(c,a,b))})}function saveCompletion(a,b,c){a.each(function(d){d.id===c&&(d.set("completed",!0),a.remove(d),hardSave(d,"",b))})}function saveDeletion(a,b){a.each(function(c){c.id===b&&(a.remove(c),displayCollectionIf(),c.destroy({success:function(){},error:function(b,c){console.log(c.description),getQuery(b.id,a)}}))})}function hardSave(a,b,c){validate(b)&&a.save({success:function(a){".edit-input"===b?displayCollectionIf():getQuery(a.id,c)},error:function(a,b){console.log(b.description),getQuery(a.id,c)}})}function displayCollectionIf(){$(".uncompleted").hasClass("toggle-button-active")&&displayCollection(uncompletedToDos),$(".completed").hasClass("toggle-button-active")&&displayCollection(completedToDos)}Parse.initialize("ltHC6n4UFCaXv6WtrRIh2EqlUUtos2cJLleHs1r2","27H9dOOERvmIJvN0KwLBvPAQ5FaCrwGZNX1YgS0S");var ToDoClass=Parse.Object.extend("ToDo"),UncompletedToDoCollectionClass=Parse.Collection.extend({model:ToDoClass,query:new Parse.Query(ToDoClass).equalTo("completed",!1)}),CompletedToDoCollectionClass=Parse.Collection.extend({model:ToDoClass,query:new Parse.Query(ToDoClass).equalTo("completed",!0)}),uncompletedToDos=new UncompletedToDoCollectionClass,completedToDos=new CompletedToDoCollectionClass;$("document").ready(function(){fetchCollection(uncompletedToDos),$(".uncompleted").click(function(){$(this).hasClass("toggle-button-active")||(toggleButtons(),displayCollection(uncompletedToDos))}),$(".completed").click(function(){$(this).hasClass("toggle-button-active")||(toggleButtons(),0===completedToDos.length?fetchCollection(completedToDos):displayCollection(completedToDos))}),$(".add-button").click(function(){toggleDropDown(),saveAddition(".add-input",uncompletedToDos)}),$(".add-input").keydown(function(a){inputLetterLimit(".add-input"),13==a.which&&(toggleDropDown(),saveAddition(".add-input",uncompletedToDos))}),$(".edit-button").click(function(){toggleEditModal(),saveEdit(".edit-input",uncompletedToDos)}),$(".edit-input").keydown(function(a){inputLetterLimit(".edit-input"),13==a.which&&(toggleEditModal(),saveEdit(".edit-input",uncompletedToDos))}),$(".add-to-do").click(function(){$(".add-input").focus(),toggleDropDown()}),$(".content").scroll(),$(".modal-background").click(function(a){a.target===this&&toggleEditModal()})});